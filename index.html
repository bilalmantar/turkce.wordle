<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TÃ¼rkÃ§e Wordle</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#121213">

<style>
:root{
  --cell-size: 60px;
  --key-size: 42px;
}
@media (max-width: 600px){
  :root{
    --cell-size: 48px;
    --key-size: 36px;
  }
}

body{
  margin:0;
  background:#121213;
  color:white;
  font-family:Arial, sans-serif;
  text-align:center;
}

h1{margin:15px 0}

.board{
  display:grid;
  grid-template-columns:repeat(5,var(--cell-size));
  gap:8px;
  justify-content:center;
  margin:15px auto;
}

.cell{
  width:var(--cell-size);
  height:var(--cell-size);
  border:2px solid #3a3a3c;
  font-size:calc(var(--cell-size) * 0.55);
  font-weight:bold;
  line-height:var(--cell-size);
  text-transform:uppercase;
}

.correct{background:#538d4e;border-color:#538d4e}
.present{background:#b59f3b;border-color:#b59f3b}
.absent{background:#3a3a3c;border-color:#3a3a3c}

/* KLAVYE */
.keyboard {
  display: flex;
  flex-direction: column;
  gap: 4px;
  max-width: 100%;
  padding: 0 5px;
}

.keyboard .row {
  display: flex;
  justify-content: center;
  gap: 4px;
  flex-wrap: nowrap; /* TUÅžLAR ALT ALTA DÃœÅžMEZ */
}

.key {
  flex: 1; /* eÅŸit geniÅŸlik */
  min-width: var(--key-size);
  height: var(--key-size);
  background: #818384;
  border-radius: 6px;
  font-weight: bold;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  user-select: none;
  box-sizing: border-box;
}

.key.correct { background:#538d4e; }
.key.present { background:#b59f3b; }
.key.absent  { background:#3a3a3c; }

@media (max-width:600px){
  .key { min-width:36px; height:36px; }
}

input, button{
  padding:10px;
  font-size:16px;
  margin:5px;
  max-width:90%;
}
</style>
</head>

<body>

<h1>TÃ¼rkÃ§e Wordle</h1>

<!-- Ã–ÄžRETMEN MODU -->
<div id="creator">
  <p>5 harfli kelime gir â†’ link Ã¼ret</p>
  <input id="wordInput" maxlength="5">
  <button onclick="createLink()">Link OluÅŸtur</button>
  <p id="linkArea"></p>
</div>

<!-- OYUNCU MODU -->
<div id="game" style="display:none">
  <div class="board" id="board"></div>
  <div class="keyboard" id="keyboard"></div>
</div>

<script>
// ðŸ”¹ TÃ¼rkÃ§e harf uyumlu dÃ¶nÃ¼ÅŸÃ¼m
function trToLower(str){
  return str.replace(/Ä°/g,'i')
            .replace(/I/g,'Ä±')
            .replace(/Åž/g,'ÅŸ')
            .replace(/Ã‡/g,'Ã§')
            .replace(/Äž/g,'ÄŸ')
            .replace(/Ãœ/g,'Ã¼')
            .replace(/Ã–/g,'Ã¶')
            .toLowerCase();
}
function trToUpper(str){
  return str.replace(/i/g,'Ä°')
            .replace(/Ä±/g,'I')
            .replace(/ÅŸ/g,'Åž')
            .replace(/Ã§/g,'Ã‡')
            .replace(/ÄŸ/g,'Äž')
            .replace(/Ã¼/g,'Ãœ')
            .replace(/Ã¶/g,'Ã–')
            .toUpperCase();
}

const keyboardLayout=[
  "E R T Y U I O P Äž Ãœ",
  "A S D F G H J K L Åž Ä°",
  "Z C V B N M Ã– Ã‡",
  "ENTER âŒ«"
];
const alphabet="abcÃ§defgÄŸhÄ±ijklmnoÃ¶prsÅŸtuÃ¼vyz";

let secret="",row=0,col=0,guess="";

// ðŸ”¹ LINK OLUÅžTUR
function createLink(){
  let w=trToLower(document.getElementById("wordInput").value);
  if(w.length!==5){alert("Kelime 5 harfli olmalÄ±"); return;}
  let code=btoa(unescape(encodeURIComponent(w)));
  let link=location.origin+location.pathname+"?code="+code;
  document.getElementById("linkArea").innerHTML=
    `<a href="${link}" target="_blank">${link}</a>`;
}

// ðŸ”¹ LINKTEN GELÄ°NEN KELÄ°ME
const params=new URLSearchParams(location.search);
if(params.has("code")){
  secret=trToLower(decodeURIComponent(escape(atob(params.get("code")))));
  startGame();
}

// ðŸ”¹ OYUNU BAÅžLAT
function startGame(){
  document.getElementById("creator").style.display="none";
  document.getElementById("game").style.display="block";

  let board=document.getElementById("board");
  for(let i=0;i<30;i++){
    let c=document.createElement("div");
    c.className="cell";
    board.appendChild(c);
  }
  createKeyboard();
}

// ðŸ”¹ KLAVYE OLUÅžTUR
function createKeyboard(){
  let kb=document.getElementById("keyboard");
  keyboardLayout.forEach(r=>{
    let rowDiv=document.createElement("div");
    rowDiv.className="row"; // her satÄ±r iÃ§in
    r.split(" ").forEach(k=>{
      let b=document.createElement("div");
      b.className="key";
      b.textContent=k;
      b.onclick=()=>handleKey(k);
      rowDiv.appendChild(b);
    });
    kb.appendChild(rowDiv);
  });
}

// ðŸ”¹ TUÅž Ä°ÅžLEME
function handleKey(k){
  if(k==="ENTER") submit();
  else if(k==="âŒ«") backspace();
  else addLetter(trToLower(k));
}

// ðŸ”¹ HARF EKLE
function addLetter(l){
  if(col<5){
    document.querySelectorAll(".cell")[row*5+col].textContent = trToUpper(l);
    guess+=l; col++;
  }
}

// ðŸ”¹ HARF SÄ°L
function backspace(){
  if(col>0){
    col--; guess=guess.slice(0,-1);
    document.querySelectorAll(".cell")[row*5+col].textContent="";
  }
}

// ðŸ”¹ ENTER
function submit(){
  if(guess.length!==5) return;
  let arr=secret.split("");
  let cells=document.querySelectorAll(".cell");

  for(let i=0;i<5;i++){
    let c=cells[row*5+i];
    if(guess[i]===secret[i]){
      c.classList.add("correct");
      updateKey(guess[i],"correct");
      arr[i]=null;
    }
  }
  for(let i=0;i<5;i++){
    let c=cells[row*5+i];
    if(c.classList.contains("correct")) continue;
    if(arr.includes(guess[i])){
      c.classList.add("present");
      updateKey(guess[i],"present");
      arr[arr.indexOf(guess[i])]=null;
    } else {
      c.classList.add("absent");
      updateKey(guess[i],"absent");
    }
  }

  if(guess===secret){alert("ðŸŽ‰ Tebrikler!"); return;}
  row++; col=0; guess="";
  if(row===6) alert("ðŸ˜¢ Kelime: "+trToUpper(secret));
}

// ðŸ”¹ KLAVYE HARF GÃœNCELLEME
function updateKey(l,s){
  document.querySelectorAll(".key").forEach(k=>{
    if(trToLower(k.textContent)===l){
      if(k.classList.contains("correct")) return;
      k.className="key "+s;
    }
  });
}

// ðŸ”¹ KLAVYE & FÄ°ZÄ°KSEL TUÅž
document.addEventListener("keydown",e=>{
  let k=trToLower(e.key);
  if(k==="enter") submit();
  else if(k==="backspace") backspace();
  else if(alphabet.includes(k)) addLetter(k);
});
</script>

</body>
</html>