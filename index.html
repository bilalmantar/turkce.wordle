<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>TÃ¼rkÃ§e Wordle</title>

<style>
body{
  background:#121213;
  color:white;
  font-family:Arial, sans-serif;
  text-align:center;
}
.board{
  display:grid;
  grid-template-columns:repeat(5,60px);
  gap:10px;
  justify-content:center;
  margin:20px auto;
}
.cell{
  width:60px;height:60px;
  border:2px solid #3a3a3c;
  font-size:32px;
  font-weight:bold;
  line-height:60px;
  text-transform:uppercase;
}
.correct{background:#538d4e;border-color:#538d4e}
.present{background:#b59f3b;border-color:#b59f3b}
.absent{background:#3a3a3c;border-color:#3a3a3c}

.key{
  display:inline-block;
  padding:10px 12px;
  margin:4px;
  background:#818384;
  border-radius:4px;
  font-weight:bold;
  cursor:pointer;
}
.key.correct{background:#538d4e}
.key.present{background:#b59f3b}
.key.absent{background:#3a3a3c}
</style>
</head>

<body>

<h1>TÃ¼rkÃ§e Wordle</h1>

<!-- Ã–ÄRETMEN MODU -->
<div id="creator">
  <p>5 harfli kelime gir â†’ link Ã¼ret</p>
  <input id="wordInput" maxlength="5">
  <button onclick="createLink()">Link OluÅŸtur</button>
  <p id="linkArea"></p>
</div>

<!-- OYUNCU MODU -->
<div id="game" style="display:none">
  <div class="board" id="board"></div>
  <div id="keyboard"></div>
</div>

<script>
const keyboardLayout=[
  "E R T Y U I O P Ä Ãœ",
  "A S D F G H J K L Å Ä°",
  "Z C V B N M Ã– Ã‡",
  "ENTER âŒ«"
];
const alphabet="abcÃ§defgÄŸhÄ±ijklmnoÃ¶prsÅŸtuÃ¼vyz";

let secret="",row=0,col=0,guess="";

// ğŸ” KELÄ°MEYÄ° GÄ°ZLEYEREK LÄ°NK OLUÅTUR
function createLink(){
  let w=document.getElementById("wordInput").value.toLowerCase();
  if(w.length!==5){alert("Kelime 5 harfli olmalÄ±");return;}
  let code=btoa(unescape(encodeURIComponent(w)));
  let link=location.origin+location.pathname+"?code="+code;
  document.getElementById("linkArea").innerHTML=
    `<a href="${link}" target="_blank">${link}</a>`;
}

// ğŸ” LÄ°NKLE GELÄ°NMÄ°Å MÄ°?
const params=new URLSearchParams(location.search);
if(params.has("code")){
  secret=decodeURIComponent(escape(atob(params.get("code"))));
  startGame();
}

function startGame(){
  document.getElementById("creator").style.display="none";
  document.getElementById("game").style.display="block";

  let board=document.getElementById("board");
  for(let i=0;i<30;i++){
    let c=document.createElement("div");
    c.className="cell";
    board.appendChild(c);
  }
  createKeyboard();
}

function createKeyboard(){
  let kb=document.getElementById("keyboard");
  keyboardLayout.forEach(r=>{
    let rowDiv=document.createElement("div");
    r.split(" ").forEach(k=>{
      let b=document.createElement("div");
      b.className="key";
      b.textContent=k;
      b.onclick=()=>handleKey(k);
      rowDiv.appendChild(b);
    });
    kb.appendChild(rowDiv);
  });
}

function handleKey(k){
  if(k==="ENTER") submit();
  else if(k==="âŒ«") backspace();
  else addLetter(k.toLowerCase());
}

function addLetter(l){
  if(col<5){
    document.querySelectorAll(".cell")[row*5+col].textContent=l;
    guess+=l; col++;
  }
}
function backspace(){
  if(col>0){
    col--; guess=guess.slice(0,-1);
    document.querySelectorAll(".cell")[row*5+col].textContent="";
  }
}

function submit(){
  if(guess.length!==5) return;
  let arr=secret.split("");
  let cells=document.querySelectorAll(".cell");

  // ğŸŸ©
  for(let i=0;i<5;i++){
    let c=cells[row*5+i];
    if(guess[i]===secret[i]){
      c.classList.add("correct");
      updateKey(guess[i],"correct");
      arr[i]=null;
    }
  }
  // ğŸŸ¨ â¬œ
  for(let i=0;i<5;i++){
    let c=cells[row*5+i];
    if(c.classList.contains("correct")) continue;
    if(arr.includes(guess[i])){
      c.classList.add("present");
      updateKey(guess[i],"present");
      arr[arr.indexOf(guess[i])]=null;
    } else {
      c.classList.add("absent");
      updateKey(guess[i],"absent");
    }
  }

  if(guess===secret){alert("ğŸ‰ Tebrikler!");return;}
  row++; col=0; guess="";
  if(row===6) alert("ğŸ˜¢ Kelime: "+secret.toUpperCase());
}

function updateKey(l,s){
  document.querySelectorAll(".key").forEach(k=>{
    if(k.textContent.toLowerCase()===l){
      if(k.classList.contains("correct")) return;
      k.className="key "+s;
    }
  });
}

document.addEventListener("keydown",e=>{
  let k=e.key.toLowerCase();
  if(k==="enter") submit();
  else if(k==="backspace") backspace();
  else if(alphabet.includes(k)) addLetter(k);
});
</script>

</body>
</html>